const e=function(e){let t=new Date(1e3*e),n=t.getHours();t.getMinutes();return n+" : 00"},t={cities:[]},n=document.querySelector("#form"),a=document.querySelector(".container"),o=document.getElementById("input"),i=document.querySelector(".search-container"),r=(document.querySelector(".add-city-button"),document.querySelector(".country"),document.querySelector(".add-city"),document.querySelector(".selected-cities")),c=document.querySelector(".container-selected"),s=document.querySelector(".details-forecast"),l=(document.querySelector(".details-container"),document.querySelector(".go-back"),document.querySelector(".title-container")),d=document.querySelector(".chart-container"),u=document.querySelector(".details-flex"),p=(document.querySelector(".details-city"),document.querySelector(".start-search")),h=document.querySelector(".form-container"),m=document.querySelector(".error-msg"),y=document.querySelector(".error-window"),f=document.querySelector(".close-error-window"),g=function(e){let t=`\n  <li class="country">\n    <button id="close" title="Usuń ze śledzonych">x</button>\n    <h1 class="city-name">${e.name}</h1>\n    <p class="date-time">${e.time}</p>\n    <p class="weather-type">${e.weather}</p>\n    <h2 class="temperature">${Math.round(e.temperature)}°C</h2>\n    <div class="secondary-information">\n      <p class="humidity">Wilgotność:</br> ${e.humidity}%</p>\n      <p class="pressure">Ciśnienie:</br> ${e.pressure} hPa</p>\n    </div>\n    <button id='check-details'>Sprawdź pogodę na 12 godzin!</button>\n  </li>\n`;r.insertAdjacentHTML("beforeend",t)},b=function(e,t){let n=`\n  \n  <li class="details">\n    <p class="details-time">${a=e.hourly[t].dt+e.timezone_offset-3600,new Date(1e3*a).toLocaleString()}</p>\n    <p class="details-temp">Temperatura: ${e.hourly[t].temp.toFixed(1)}°C</p>\n    <p class="details-feels-like">Odczuwalna: ${e.hourly[t].feels_like.toFixed(1)}°C</p>\n    <p class="details-wind">Wiatr: ${(3.6*e.hourly[t].wind_speed).toFixed(1)} km/h</p>\n  </li>`;var a;s.insertAdjacentHTML("beforeend",n)},w=function(e){return e.split(" ")[0].charAt(0).toUpperCase()+e.slice(1)},L=function(e){let t=`<p>${e}</p>`;y.style.display="block",m.insertAdjacentHTML("afterbegin",t)},S=[],$={label:"Temperatura rzeczywista",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[]},v={label:"Temperatura odczuwalna",backgroundColor:"rgb(52, 152, 219)",borderColor:"rgb(52, 152, 219)",data:[]},k={type:"line",data:{labels:S,datasets:[$,v]},options:{}},q=new Chart(document.getElementById("myChart"),k),z=async function(t){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&units=metric&lang=pl&appid=1dd8639e06977072c7c8fcaea598d700`).then((e=>{if(!e.ok)throw i.style.border="none",new Error(L("Nie znaleziono miasta o takiej nazwie, spróbuj ponownie"));return e.json()})).then((t=>{!function(t){const n=`\n  <li class="searched-city">\n    <h1 class="city-name">${t.name}</h1>\n    <p class="date-time">${e(t.dt+t.timezone-3600)}</p>\n    <p class="weather-type">${w(t.weather[0].description)}</p>\n    <h2 class="temperature">${Math.round(t.main.temp)}°C</h2>\n    <div class="secondary-information">\n      <p class="humidity">Wilgotność:</br> ${t.main.humidity}%</p>\n      <p class="pressure">Ciśnienie:</br> ${t.main.pressure} hPa</p>\n    </div>\n    <div class="add-city">\n      <button id="add-city-button">Dodaj miasto do śledzonych</button>\n    </div>\n  </li>\n`;i.insertAdjacentHTML("beforeend",n)}(t),i.classList.add("active")})).catch((e=>console.error(e))).finally((()=>i.style.opacity=1))},C=async function(e,t){fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&lang=pl&appid=1dd8639e06977072c7c8fcaea598d700`).then((e=>{if(!e.ok)throw new Error(L(`Wystąpił błąd podczas pobierania danych ${e.status}`));return e.json()})).then((e=>{!function(e){console.log(e);let t=`\n  <h1 class="details-city">${e}</h1>\n  `;l.insertAdjacentHTML("afterbegin",t)}(e.city.name)}))},E=function(e){return JSON.parse(localStorage.getItem(e))},j=function(n){if("add-city-button"===n.target.id&&(!async function(e){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&lang=pl&appid=1dd8639e06977072c7c8fcaea598d700`).then((e=>{if(!e.ok)throw new Error(L(`Wystąpił błąd podczas pobierania danych ${e.status}`));return e.json()})).then((e=>{M(t.cities,e)})).catch((e=>console.error(e))).finally((()=>i.style.opacity=1))}(x()),i.innerHTML="",i.classList.remove("active"),o.value="",h.classList.add("hide"),p.classList.toggle("hide")),"go-back"===n.target.id&&(i.classList.toggle("hide"),c.classList.toggle("hide"),u.classList.add("hide"),d.classList.add("hide"),s.classList.add("hide"),a.classList.remove("hide"),s.textContent="",l.innerHTML="",S.splice(0,S.length),v.data=[],$.data=[]),"check-details"===n.target.id){const t=n.target.parentElement.children;let o;for(let e=0;e<t.length;e++)t[e].classList.contains("city-name")&&(o=t[e].textContent);i.classList.toggle("hide"),c.classList.toggle("hide"),u.classList.remove("hide"),d.classList.remove("hide"),s.classList.remove("hide"),a.classList.add("hide"),console.log(o),async function(t){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&units=metric&lang=pl&appid=1dd8639e06977072c7c8fcaea598d700`).then((e=>{if(!e.ok)throw new Error(L(`Wystąpił błąd podczas pobierania danych ${e.status}`));return e.json()})).then((t=>fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.coord.lat}&lon=${t.coord.lon}&units=metric&lang=pl&appid=1dd8639e06977072c7c8fcaea598d700`).then((e=>{if(!e.ok)throw new Error(L(`Wystąpił błąd podczas pobierania danych ${e.status}`));return e.json()})).then((t=>{let n,a,o;C(t.lat,t.lon),t.hourly.forEach((i=>{let r=t.hourly.indexOf(i);r<12&&(console.log(i),n=e(i.dt+t.timezone_offset-3600),S.push(n),o=i.temp,$.data.push(o),a=i.feels_like,v.data.push(a),b(t,r),q.update(k))}))}))))}(o)}if("close"===n.target.id){const e=n.target.parentElement,a=e.children;let o,i;for(let e=0;e<a.length;e++)a[e].classList.contains("city-name")&&(o=a[e].textContent);e.parentNode.removeChild(e);const c=t.cities.find((e=>e.name==o)),s=t.cities.indexOf(c);if(c){t.cities.splice(s,1);for(let e=0;e<localStorage.length;e++)c.name===localStorage.key([e])&&(i=localStorage.key([e]),r=i,localStorage.removeItem(r))}}var r};p.addEventListener("click",(function(e){!function(e){e.preventDefault(),a.classList.remove("hide"),p.classList.add("hide"),h.classList.toggle("hide")}(e)})),n.addEventListener("submit",(function(e){!function(e){e.preventDefault(),z(x()),i.innerHTML=""}(e)})),document.addEventListener("click",(function(e){j(e)})),window.addEventListener("click",(function(e){e.target==y&&(m.textContent="",y.style.display="none")})),f.addEventListener("click",(function(e){m.textContent="",y.style.display="none"}));const x=function(){return document.getElementById("input").value},M=function(t,n){let a=function(t){const n=t;return{name:n.name,weather:w(n.weather[0].description),time:e(n.dt+n.timezone-3600),temperature:n.main.temp.toFixed(0),humidity:n.main.humidity,pressure:n.main.pressure}}(n);t.find((e=>e.name===a.name))?L("Już śledzisz to miasto!"):(t.push(a),function(e,t){localStorage.setItem(e,JSON.stringify(t))}(a.name,a),g(E(a.name))),console.log(t)};!function(){for(let e=0;e<localStorage.length;e++)g(E(localStorage.key([e]))),t.cities.push(E(localStorage.key([e])))}();
//# sourceMappingURL=index.8d49ed02.js.map
